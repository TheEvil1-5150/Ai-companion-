<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Companion</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:system-ui;background:#0a0a0a;color:#fff;height:100vh;display:flex;flex-direction:column}
.header{padding:16px;background:#1a1a1a;border-bottom:1px solid #333;display:flex;justify-content:space-between;align-items:center}
.profiles{display:flex;gap:8px;padding:12px;overflow-x:auto;background:#151515}
.profile{cursor:pointer;padding:8px 16px;background:#333;border-radius:20px;white-space:nowrap;font-size:14px}
.profile.active{background:#7f56d9}
.content{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px}
.message{max-width:85%;padding:12px 16px;border-radius:18px;word-wrap:break-word}
.user{align-self:flex-end;background:#7f56d9;border-bottom-right-radius:4px}
.assistant{align-self:flex-start;background:#333;border:1px solid #444;border-bottom-left-radius:4px}
.input-area{padding:16px;background:#1a1a1a;border-top:1px solid #333}
.input-container{display:flex;gap:8px}
input{flex:1;padding:12px;background:#333;border:1px solid #555;border-radius:20px;color:#fff;font-size:16px}
button{padding:12px 20px;background:#7f56d9;border:none;border-radius:20px;color:#fff;font-size:16px}
.settings{display:none;position:fixed;inset:0;background:#0a0a0a;z-index:100;padding:20px}
.settings.active{display:block}
.setting{margin-bottom:20px}
label{display:block;margin-bottom:8px;color:#888;font-size:14px}
.setting input{width:100%;padding:12px;background:#333;border:1px solid #555;border-radius:12px;color:#fff;font-size:16px}
.btn-primary{width:100%;padding:16px;background:#7f56d9;border:none;border-radius:12px;color:#fff;font-size:16px;font-weight:600;margin-bottom:12px}
.btn-secondary{width:100%;padding:16px;background:#333;border:none;border-radius:12px;color:#fff;font-size:16px}
</style>
</head>
<body>
<div class="header">
<div>ğŸ¤– <b id="ai-name">Aria</b></div>
<div>
<button onclick="toggleProfiles()">ğŸ‘¤</button>
<button onclick="toggleSettings()">âš™ï¸</button>
</div>
</div>

<div class="profiles" id="profiles">
<div class="profile active" onclick="setProfile('aria')">ğŸŒ¸ Aria</div>
<div class="profile" onclick="setProfile('victor')">ğŸ© Victor</div>
<div class="profile" onclick="setProfile('momo')">ğŸ® Momo</div>
<div class="profile" onclick="setProfile('raven')">ğŸŒ™ Raven</div>
</div>

<div class="content" id="messages"></div>

<div class="input-area">
<div class="input-container">
<input type="text" id="input" placeholder="Type a message..." onkeydown="if(event.key==='Enter')send()">
<button onclick="send()">â¤</button>
</div>
</div>

<div class="settings" id="settings">
<h2 style="margin-bottom:20px">âš™ï¸ Settings</h2>
<div class="setting">
<label>AI Backend URL</label>
<input type="text" id="apiUrl" value="http://localhost:11434/v1/chat/completions">
</div>
<div class="setting">
<label>Model Name</label>
<input type="text" id="model" value="llama2">
</div>
<div class="setting">
<label>API Key (optional)</label>
<input type="password" id="apiKey" placeholder="For OpenAI">
</div>
<button class="btn-primary" onclick="saveSettings()">ğŸ’¾ Save</button>
<button class="btn-secondary" onclick="toggleSettings()">âœ• Close</button>
</div>

<script>
const profiles={aria:{name:'Aria',prompt:'You are Aria, a warm, friendly AI companion.',greeting:'Hey there! I am Aria. What is on your mind?'},victor:{name:'Victor',prompt:'You are Victor, a dominant, commanding AI companion.',greeting:'So you have decided to approach me. Tell me what you want.'},momo:{name:'Momo',prompt:'You are Momo, an energetic, playful gaming companion.',greeting:'Hiiii! I am Momo! What games do you like?'},raven:{name:'Raven',prompt:'You are Raven, a mysterious, dark AI companion.',greeting:'What draws you to darkness, I wonder?'}};

let currentProfile='aria',messages=[],isTyping=false,settings={apiUrl:'http://localhost:11434/v1/chat/completions',model:'llama2',apiKey:''};

if(localStorage.getItem('ai-settings')){settings=JSON.parse(localStorage.getItem('ai-settings'));document.getElementById('apiUrl').value=settings.apiUrl;document.getElementById('model').value=settings.model;document.getElementById('apiKey').value=settings.apiKey;}

function toggleSettings(){document.getElementById('settings').classList.toggle('active')}
function toggleProfiles(){const p=document.getElementById('profiles');p.style.display=p.style.display==='none'?'flex':'none'}
function setProfile(id){currentProfile=id;document.querySelectorAll('.profile').forEach(el=>el.classList.remove('active'));event.target.classList.add('active');document.getElementById('ai-name').textContent=profiles[id].name;messages=[{role:'assistant',content:profiles[id].greeting}];render();}

function saveSettings(){settings.apiUrl=document.getElementById('apiUrl').value;settings.model=document.getElementById('model').value;settings.apiKey=document.getElementById('apiKey').value;localStorage.setItem('ai-settings',JSON.stringify(settings));toggleSettings();alert('Saved!')}

function render(){const c=document.getElementById('messages');c.innerHTML=messages.map(m=>`<div class="message ${m.role}">${m.content.replace(/</g,'&lt;')}</div>`).join('');c.scrollTop=c.scrollHeight;}

async function send(){const i=document.getElementById('input'),t=i.value.trim();if(!t||isTyping)return;messages.push({role:'user',content:t});i.value='';isTyping=true;render();try{const r=await fetch(settings.apiUrl,{method:'POST',headers:{'Content-Type':'application/json',...(settings.apiKey&&{'Authorization':`Bearer ${settings.apiKey}`})},body:JSON.stringify({model:settings.model,messages:[{role:'system',content:profiles[currentProfile].prompt},...messages.map(m=>({role:m.role,content:m.content}))]})});const d=await r.json();messages.push({role:'assistant',content:d.choices?.[0]?.message?.content||'Error'})}catch(e){messages.push({role:'assistant',content:'Error: '+e.message})}isTyping=false;render();}

messages.push({role:'assistant',content:profiles.aria.greeting});render();
</script>
</body>
</html>
